<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>杂草校园</title>
		<meta name="viewport" content="initial-scale=1, maximum-scale=1">
		<!-- <link rel="shortcut icon" href="/favicon.ico"> -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0" />

		<link rel="stylesheet" href="https://g.alicdn.com/msui/sm/0.6.2/css/sm.min.css">
		<link rel="stylesheet" href="https://g.alicdn.com/msui/sm/0.6.2/css/sm-extend.min.css">

		<link rel="stylesheet" href="../main.css">
	</head>
	<body>
		<div class="page vindicate_page">
			<header class="bar bar-nav">
				<a href="index.html" data-no-cache="true" class="button button-link button-nav pull-left">
					<span class="icon icon-left"></span>
				</a>
				<a href="my_vindicate.html" class="button button-link button-nav pull-right open-panel">
					我的表白
				</a>
				<h1 class="title">表白</h1>
			</header>

			<div class="content pull-to-refresh-content vindicate-content" data-ptr-distance="55">
				<!-- 默认的下拉刷新层 -->
				<div class="pull-to-refresh-layer">
					<div class="preloader"></div>
					<div class="pull-to-refresh-arrow"></div>
				</div>

				<div class="vindicate-header">
					<p>今天表白2个</p>
					<p>一周表白10个</p>
				</div>

				<div class="content-block">
					<div class="buttons-row">
						<a href="#tab1" class="tab-link active button">最热</a>
						<a href="#tab2" class="tab-link button">最新</a>
					</div>
				</div>
				<div class="tabs">
					<div id="tab1" class="tab tab-hot active">
						<div class="list-block">
							<div class="card-container">
								<div class="card">
									<div class="card-header">
										<span>To：芬</span>
										<a external class="likeit">
											<i class="iconfontzacao">&#xe600;</i>
											<span>10</span>
										</a>
									</div>
									<div class="card-content">
										<div class="card-content-inner">
											<div class="love-content">
												每天想你1次！❤
											</div>
										</div>
									</div>
									<div class="card-footer">
										<div class="footer-table">
											<div class="footer-td">
												<div class="building">
													<i class="iconfontzacao">&#xe6c3;</i>
													<span>教学楼</span>
												</div>
											</div>
											<div class="footer-td">
												<div class="tolove">
													<p>From：星星</p>
													<p>2016.12.01</p>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="card">
									<div class="card-header">
										<span>To：芬</span>
										<a external class="likeit">
											<i class="iconfontzacao">&#xe600;</i>
											<span>10</span>
										</a>
									</div>
									<div class="card-content">
										<div class="card-content-inner">
											<div class="love-content">
												每天想你2次！❤
											</div>
										</div>
									</div>
									<div class="card-footer">
										<div class="footer-table">
											<div class="footer-td">
												<div class="building">
													<i class="iconfontzacao">&#xe6c3;</i>
													<span>教学楼</span>
												</div>
											</div>
											<div class="footer-td">
												<div class="tolove">
													<p>From：星星</p>
													<p>2016.12.01</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="loading loading-hot">
							<button class="button">加载更多</button>
						</div>
					</div>
					<div id="tab2" class="tab">
						<div class="list-block">
							<div class="card-container">
								<div class="card">
									<div class="card-header">
										<span>To：芬</span>
										<a external class="likeit">
											<i class="iconfontzacao">&#xe600;</i>
											<span>10</span>
										</a>
									</div>
									<div class="card-content">
										<div class="card-content-inner">
											<div class="love-content">
												每天想你1次！❤
											</div>
										</div>
									</div>
									<div class="card-footer">
										<div class="footer-table">
											<div class="footer-td">
												<div class="building">
													<i class="iconfontzacao">&#xe6c3;</i>
													<span>教学楼</span>
												</div>
											</div>
											<div class="footer-td">
												<div class="tolove">
													<p>From：星星</p>
													<p>2016.12.01</p>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="card">
									<div class="card-header">
										<span>To：芬</span>
										<a external class="likeit">
											<i class="iconfontzacao">&#xe600;</i>
											<span>10</span>
										</a>
									</div>
									<div class="card-content">
										<div class="card-content-inner">
											<div class="love-content">
												每天想你2次！❤
											</div>
										</div>
									</div>
									<div class="card-footer">
										<div class="footer-table">
											<div class="footer-td">
												<div class="building">
													<i class="iconfontzacao">&#xe6c3;</i>
													<span>教学楼</span>
												</div>
											</div>
											<div class="footer-td">
												<div class="tolove">
													<p>From：星星</p>
													<p>2016.12.01</p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="loading loading-new">
							<button class="button">加载更多</button>
						</div>
					</div>
				</div>
			</div>
			<a class="button-send send-vindicate">发布表白</a>
		</div>
		<!-- vindicate Popup -->
		<div class="popup popup-vindicate">
			<p class="popup-header">
				<span class="close-popup">不表白了</span>
			</p>
			<div class="content-block">
				<div class="list-block">
					<ul>
						<li>
							<div class="content-block-title">我想大声告诉你</div>
							<input type="text" class="form-control name" placeholder="谁？">
						</li>
						<li>
							<div class="content-block-title">我想对你说</div>
							<textarea class="form-control conte" placeholder="最多80字..."></textarea>
						</li>
						<li>
							<div class="content-block-title">无论你在哪</div>
							<select class="form-control local">
								<option value="0">请选择宿舍</option>
								<option>雅仕楼</option>
								<option>雅致楼</option>
							</select>
						</li>
						<li>
							<div class="content-block-title">我就是</div>
							<input type="text" class="form-control myname" placeholder="谁？">
						</li>
					</ul>
				</div>
			</div>
			<a class="submit-vindicate">提交表白</a>
		</div>

		<script type='text/javascript' src='https://g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
		<script type="text/javascript">
			$.config = {router: false}
		</script>
		<script type='text/javascript' src='https://g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
		<!-- <script type='text/javascript' src='https://g.alicdn.com/msui/sm/0.6.2/js/sm-extend.min.js' charset='utf-8'></script> -->
		<script type="text/javascript">
			$(function () {
				$.init();

				$(document).on('click','.likeit', function () {
					$(this).parent().find('span').after('<a external class="liked" style="opacity:0.5;">' +
															'<i class="iconfontzacao">&#xe600;</i>' +
															'<span>11</span>' +
														'</a>');
					$(this).remove();
				});
				$(document).on('click','.liked', function () {
					$(this).parent().find('span').after('<a external class="likeit">' +
															'<i class="iconfontzacao">&#xe600;</i>' +
															'<span>10</span>' +
														'</a>');
					$(this).remove();
				});



				$(document).on('click','.loading-new button', function () {
					$(this).text("全部已加载完");
					$(this).attr("style","background-color:#999;box-shadow: 0px 4px 0px #666;");
				});
				$(document).on('click','.loading-hot button', function () {
					$(this).text("全部已加载完");
					$(this).attr("style","background-color:#999;box-shadow: 0px 4px 0px #666;");
				});
				$(document).on('click','.send-vindicate', function () {
					$.popup('.popup-vindicate');
				});
				$(document).on('click','.submit-vindicate', function () {
					if($(".name").val() == ""){
						alert('请填写被表白人名字');
						return false;
					}else if($(".conte").val() == ""){
						alert('请填写表白内容');
						return false;
					}else if($(".local").val() == "0"){
						alert('请选择宿舍');
						return false;
					}else{
						$.alert("表白成功~！❤");
						$.closeModal('.popup-vindicate');
					}
				})

				// 添加'refresh'监听器
				$(document).on('refresh', '.pull-to-refresh-content',function(e) {
				    // 模拟2s的加载过程
				    setTimeout(function() {
				        var cardNumber = $(e.target).find('.card').length + 1;
				        var cardHTML = '<div class="card">' +
											'<div class="card-header">' +
												'<span>To：芬</span>' +
												'<a class="likeit">' +
													'<i class="iconfontzacao">&#xe600;</i>' + 
													'  ' +
													'<span>10</span>' +
												'</a>' +
											'</div>' +
											'<div class="card-content">' +
												'<div class="card-content-inner">' +
													'<div class="love-content">' +
														'每天想你' + cardNumber +'次！❤' +
													'</div>' +
												'</div>' +
											'</div>' +
											'<div class="card-footer">' +
												'<div class="footer-table">' +
													'<div class="footer-td">' +
														'<div class="building">' +
															'<i class="iconfontzacao">&#xe6c3;</i>' +
															'<span>教学楼</span>' +
														'</div>' +
													'</div>' +
													'<div class="footer-td">' +
														'<div class="tolove">' +
															'<p>From：星星</p>' +
															'<p>2016.12.01</p>' +
														'</div>' +
													'</div>' +
												'</div>' +
											'</div>' +
										'</div>';

				        $(e.target).find('.card-container').prepend(cardHTML);
				        // 加载完毕需要重置
				        $.pullToRefreshDone('.pull-to-refresh-content');
				    }, 2000);
				});
			})
		</script>
	</body>
</html>