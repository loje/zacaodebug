<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>杂草校园</title>
		<meta name="viewport" content="initial-scale=1, maximum-scale=1">
		<!-- <link rel="shortcut icon" href="/favicon.ico"> -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="https://g.alicdn.com/msui/sm/0.6.2/css/sm.min.css">
		<link rel="stylesheet" href="https://g.alicdn.com/msui/sm/0.6.2/css/sm-extend.min.css">

		<link rel="stylesheet" href="../main.css">
	</head>
	<body class="role_page">
		<div class="page rolereward_page">
			<header class="bar bar-nav">
				<a href="index.html" class="button button-link button-nav pull-left">
					<span class="icon icon-left"></span>
				</a>
				<a class="button button-link button-nav pull-right open-panel select-map" data-panel='#panel-select-map'>
					<i class="iconfontzacao">&#xe61e;</i>
				</a>
				<h1 class="title">奖励</h1>
			</header>

			<div class="content reward-content">
				<div class="reward-list">
					<div class="reward-card">
						<div class="img" style="background-image: url(img/signbanner.jpg);"></div>
						<div class="reward-info">
							<h5>每日签到</h5>
							<p>+10颗种子</p>
							<a class="reward-link unfinish-reward">点击领取</a>
						</div>
					</div>

					<p class="loaded">加载完毕</p>
				</div>
			</div>
		</div>

		<div class="panel-overlay"></div>
		<!-- Left Panel with Reveal effect -->
		<div class="panel panel-right panel-reveal theme-dark" id='panel-select-map'>
			<div class="content-block">
				<ul>
					<li>
						<a class="tab-item" href="bag.html">
							<span class="icon">
								<i class="iconfontzacao">&#xe666;</i>
							</span>
							<p class="tab-label">背包</p>
						</a>
					</li>
					<li>
						<a class="tab-item" href="props.html">
							<span class="icon">
								<i class="iconfontzacao">&#xe60d;</i>
							</span>
							<p class="tab-label">道具</p>
						</a>
					</li>
					<li>
						<a class="tab-item" href="task.html">
							<span class="icon">
								<i class="iconfontzacao">&#xe807;</i>
							</span>
							<p class="tab-label">任务</p>
						</a>
					</li>
					<li>
						<a class="tab-item" href="reward.html" style="opacity: 0.25;-webkit-opacity: 0.25;">
							<span class="icon">
								<i class="iconfontzacao">&#xe608;</i>
							</span>
							<p class="tab-label">奖励</p>
						</a>
					</li>
					<li>
						<a class="tab-item" href="record.html">
							<span class="icon">
								<i class="iconfontzacao">&#xe607;</i>
							</span>
							<p class="tab-label">成就</p>
						</a>
					</li>
					<li>
						<a class="tab-item" href="ranking.html">
							<span class="icon">
								<i class="iconfontzacao">&#xe64e;</i>
							</span>
							<p class="tab-label">排行榜</p>
						</a>
					</li>
				</ul>
			</div>
		</div>

		<script type='text/javascript' src='https://g.alicdn.com/sj/lib/zepto/zepto.min.js' charset='utf-8'></script>
		<script type="text/javascript">
			$.config = {router: false}
		</script>
		<script type='text/javascript' src='https://g.alicdn.com/msui/sm/0.6.2/js/sm.min.js' charset='utf-8'></script>
		<!-- <script type='text/javascript' src='https://g.alicdn.com/msui/sm/0.6.2/js/sm-extend.min.js' charset='utf-8'></script> -->

		<script type="text/javascript">
			$(function(){
				$.init();

				$(document).on('click','.reward-list .reward-card .reward-info a.unfinish-reward',function () {
					$.alert("已领取奖励！");
					$(this).text("已领取奖励");
					$(this).removeClass("unfinish-reward");
				})


				// // 下拉刷新
				// $.initPullToRefresh('.pull-to-refresh-content')
				// // 添加'refresh'监听器
				// $(document).on('refresh', '.pull-to-refresh-content',function(e) {
				// 	// 模拟2s的加载过程
				// 	setTimeout(function() {
				// 		var cardNumber = $(e.target).find('.reward-list .reward-card').length + 1;
				// 		var cardHTML = '<div class="reward-card">' +
				// 							'<div class="img" style="background-image: url(img/signbanner.jpg);"></div>' +
				// 							'<div class="reward-info">' +
				// 								'<h5>每日签到</h5>' +
				// 								'<p>+10颗种子</p>' +
				// 								'<a class="reward-link unfinish-reward">点击领取</a>' +
				// 							'</div>' +
				// 						'</div>';

				// 		$(e.target).find('.reward-list').prepend(cardHTML);
				// 		// 加载完毕需要重置
				// 		$.pullToRefreshDone('.pull-to-refresh-content');
				// 	}, 2000);
				// });


				// //无限滚动

				// // 加载flag
				// var loading = false;
				// // 最多可加载的条目
				// var maxItems = 20;

				// // 每次加载添加多少条目
				// var itemsPerLoad = 5;

				// function addItems(number, lastIndex) {
				// 	  // 生成新条目的HTML
				// 	  var html = '';
				// 	  for (var i = lastIndex + 1; i <= lastIndex + number; i++) {
				// 		  html += '<div class="reward-card">' +
				// 						'<div class="img" style="background-image: url(img/signbanner.jpg);"></div>' +
				// 						'<div class="reward-info">' +
				// 							'<h5>每日签到</h5>' +
				// 							'<p>+10颗种子</p>' +
				// 							'<a class="reward-link unfinish-reward">点击领取</a>' +
				// 						'</div>' +
				// 					'</div>';
				// 	  }
				// 	  // 添加新条目
				// 	  $('.infinite-scroll-bottom .reward-list').append(html);
				//   }
				//   //预先加载10条
				// addItems(itemsPerLoad, 0);

				// // 上次加载的序号
				// var lastIndex = 5;

				// // 注册'infinite'事件处理函数
				// $(document).on('infinite', '.infinite-scroll-bottom',function() {

				//   // 如果正在加载，则退出
				//   if (loading) return;

				//   // 设置flag
				//   loading = true;

				//   // 模拟1s的加载过程
				//   setTimeout(function() {
				// 	  // 重置加载flag
				// 	  loading = false;

				// 	  if (lastIndex >= maxItems) {
				// 		  // 加载完毕，则注销无限加载事件，以防不必要的加载
				// 		  $.detachInfiniteScroll($('.infinite-scroll'));
				// 		  // 删除加载提示符
				// 		  $('.infinite-scroll-preloader').remove();
				// 		  $('.infinite-scroll-bottom .reward-list').append('<p class="loaded">加载完毕</p>');
				// 		  return;
				// 	  }

				// 	  // 添加新条目
				// 	  addItems(itemsPerLoad, lastIndex);
				// 	  // 更新最后加载的序号
				// 	  lastIndex = $('.reward-list .reward-card').length;
				// 	  //容器发生改变,如果是js滚动，需要刷新滚动
				// 	  $.refreshScroller();
				//   }, 1000);
				// });

			})
		</script>
	</body>
</html>